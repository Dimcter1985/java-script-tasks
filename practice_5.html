<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    45
    <br />
    <input
      type="text"
      class="input"
      placeholder="введите название стран через запятую"
    /><br /><br />
    <button class="btn">press</button><br /><br />
    <ul class="list"></ul>
    46
    <br />
    <input
      type="text"
      class="input2"
      placeholder="введи страну и нажми Enter"
    /><br />
    <p class="txt"></p>
    47
    <div class="txt2">Loremipsumdolor</div>
    <div class="txt2">Loremipsumdolor</div>
    <div class="txt2">Loremipsumdolor</div>
    48
    <table
      class="table"
      style="border: 1px solid black; border-collapse: collapse"
    >
      <tr
        class="row"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell"
          style="border: 1px solid black; border-collapse: collapse"
        >
          2
        </td>
        <td
          class="cell"
          style="border: 1px solid black; border-collapse: collapse"
        >
          9
        </td>
        <td
          class="cell"
          style="border: 1px solid black; border-collapse: collapse"
        >
          4
        </td>
      </tr>
    </table>
    <br />
    <button class="btn2">press</button><br />
    49
    <table
      class="table"
      style="border: 1px solid black; border-collapse: collapse"
    >
      <tr
        class="row"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell2"
          style="border: 1px solid black; border-collapse: collapse"
        >
          2
        </td>
        <td
          class="cell2"
          style="border: 1px solid black; border-collapse: collapse"
        >
          9
        </td>
        <td
          class="cell2"
          style="border: 1px solid black; border-collapse: collapse"
        >
          4
        </td>
      </tr>
    </table>
    <br />
    <button class="btn3">press</button><br />
    <input type="text" class="input3" /><br />
    50
    <table
      class="table"
      style="border: 1px solid black; border-collapse: collapse"
    >
      <tr
        class="row2"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          2
        </td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          9
        </td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          4
        </td>
      </tr>
      <tr
        class="row2"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          2
        </td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          9
        </td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        >
          4
        </td>
      </tr>
      <tr
        class="row2"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        ></td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        ></td>
        <td
          class="cell3"
          style="border: 1px solid black; border-collapse: collapse"
        ></td>
      </tr>
    </table>
    <br />
    <button class="btn4">press</button><br /><br />
    51
    <table
      class="table"
      style="border: 1px solid black; border-collapse: collapse"
    >
      <tr
        class="row3"
        style="border: 1px solid black; border-collapse: collapse"
      >
        <td
          class="cell4"
          style="border: 1px solid black; border-collapse: collapse"
        >
          2
        </td>
        <td
          class="cell4"
          style="border: 1px solid black; border-collapse: collapse"
        >
          9
        </td>
        <td
          class="cell4"
          style="border: 1px solid black; border-collapse: collapse"
        >
          4
        </td>
      </tr>
    </table>
    <br />
    <div class="buttons">
      <button class="btn5">press</button><br /><br />
      <button class="btn6">clear</button><br />
    </div>
    <br />
    <p class="txt3"></p>
    52
    <table class="table">
      <tr class="row4">
        <td class="cell5">Россия</td>
        <td class="cell5">Украина</td>
        <td class="cell5">Беларусь</td>
      </tr>
      <tr class="row4">
        <td class="cell5">Германия</td>
        <td class="cell5">Великобритания</td>
        <td class="cell5">Франция</td>
      </tr>
      <tr class="row4">
        <td class="cell5">США</td>
        <td class="cell5">Мексика</td>
        <td class="cell5">Канада</td>
      </tr>
    </table>
    <br />
    53
    <ul class="list">
      <li class="item">
        <p class="coutry">Россия</p>
        <ul class="sities">
          <li class="sity">Москва</li>
          <li class="sity">Пермь</li>
          <li class="sity">Сочи</li>
        </ul>
      </li>
      <li class="item">
        <p class="coutry">США</p>
        <ul class="sities">
          <li class="sity">Детройт</li>
          <li class="sity">Сиэтл</li>
          <li class="sity">Атланта</li>
        </ul>
      </li>
      <li class="item">
        <p class="coutry">Япония</p>
        <ul class="sities">
          <li class="sity">Токио</li>
          <li class="sity">Осака</li>
          <li class="sity">Киото</li>
        </ul>
      </li>
    </ul>

    <style>
      .table {
        border: 1px solid black;
      }
      .cell5 {
        width: 250px;
        border: 1px solid black;
        position: relative;
        height: 25px;
      }
      .edit {
        display: none;
        z-index: 10;
      }
      .active {
        position: absolute;
        top: 0;
        left: 0;
        display: block;
      }
      .sities {
        display: none;
      }

      .visible {
        display: block;
      }
    </style>

    <script>
      //45 В инпут через запятую вводятся страны. По нажатию на кнопку сделайте так, чтобы эти страны записались в ul под инпутом (каждая страна отдельный li).
      (function () {
        const input = document.querySelector(".input");
        const btn = document.querySelector(".btn");

        function showCountrys() {
          const list = document.querySelector(".list");
          let arr = input.value.split(", ");

          arr.forEach((el) => {
            let item = document.createElement("li");
            item.textContent = el;
            list.appendChild(item);
          });
        }

        btn.addEventListener("click", showCountrys);
      })();

      //46  В инпут вводится страна и нажимается Enter. По нажатию на Enter сделайте так, чтобы введенные страны записывались в абзац под инпутом через запятую. То есть по каждому нажатию Enter в абзац будут добавляться все новые и новые страны.
      (function () {
        const input = document.querySelector(".input2");
        const txt = document.querySelector(".txt");

        input.addEventListener("keydown", (event) => {
          if (event.keyCode === 13) {
            txt.textContent += `${input.value}, `;
            input.value = "";
          }
        });
      })();

      //47 На странице есть дивы. В них есть текст. Обойдите все дивы и обрежьте тот текст, который в них стоит так, чтобы он стал длиной 10 символов. И добавьте троеточие в конец обрезанного текста
      (function () {
        const txt = document.querySelectorAll(".txt2");

        txt.forEach((el) => {
          let newStr = el.textContent.substring(0, 10);
          el.textContent = `${newStr}...`;
        });
      })();

      //48 Дана таблица с числами. По нажатию на кнопку найдите ячейку, в которой хранится максимальное число, и сделайте ее фон красным
      (function () {
        const btn = document.querySelector(".btn2");
        const cells = document.querySelectorAll(".cell");
        let cell = cells[0].textContent;

        btn.addEventListener("click", () => {
          cells.forEach((el) => {
            if (el.textContent > cell) {
              cell = el;
            }
          });
          cell.style.background = "red";
        });
      })();

      //49 Дана таблица с числами. По нажатию на кнопку в инпут под таблицей выведите эти числа через запятую в порядке возрастания
      (function () {
        const btn = document.querySelector(".btn3");
        const cells = document.querySelectorAll(".cell2");
        const input = document.querySelector(".input3");

        btn.addEventListener("click", () => {
          let arr = [];
          cells.forEach((el) => {
            arr.push(+el.innerHTML);
          });

          arr.sort();

          let str = arr.join(", ");
          input.value = str;
        });
      })();

      //50 Дана таблица с числами. По нажатию на кнопку в последний ряд таблицы в каждую ячейку запишите сумму чисел в столбце таблицы, расположенном над определенной ячейкой.
      (function () {
        const btn = document.querySelector(".btn4");
        const rows = document.querySelectorAll(".row2");

        function func() {
          let arr = [];

          for (let i = 0; i < rows.length - 1; i++) {
            for (let j = 0; j < rows[i].children.length; j++) {
              if (arr[j] === undefined) {
                arr[j] = 0;
              }
              arr[j] += +rows[i].children[j].textContent;
            }
          }
          for (let k = 0; k < rows[rows.length - 1].children.length; k++) {
            rows[rows.length - 1].children[k].textContent = arr[k];
          }
        }

        btn.addEventListener("click", func);
      })();

      //51 Дана таблица с числами. По нажатию на ячейку она активируется и становится красного цвета. Активировать можно много ячеек. Под таблицей кнопка. По нажатию по этой кнопке в абзац ниже выведите сумма активированных ячеек. Реализуйте кнопку 'сбросить активированные ячейки'.
      (function () {
        const cells = document.querySelectorAll(".cell4");
        const buttons = document.querySelector(".buttons");
        const txt = document.querySelector(".txt3");
        let arrCells = [];

        cells.forEach((el) => {
          el.addEventListener("click", () => {
            el.style.background = "red";
            arrCells.push(+el.textContent);
          });
        });

        buttons.addEventListener("click", (event) => {
          if (event.target.className === "btn5") sumCells();
          if (event.target.className === "btn6") throwActiveCell();
        });

        function sumCells() {
          let sum = arrCells.reduce((acc, curr) => acc + curr);
          txt.textContent = sum;
        }

        function throwActiveCell() {
          arrCells = [];
          txt.textContent = "";
          cells.forEach((el) => {
            el.style.background = "none";
          });
        }
      })();

      //52 Дана таблица. По нажатию на ячейку в ней появляется инпут с содержимым этой ячейки и кнопка сохранить. Можно поредактировать текст в инпуте, сохранить - и текст ячейки поменяется.
      (function () {
        const cells = document.querySelectorAll(".cell5");

        cells.forEach((el) => {
          el.addEventListener("click", () => {
            let val = el.textContent;
            el.style.display = "none";
            let inp = document.createElement("input");
            inp.value = val;
            el.parentNode.insertBefore(inp, el.nextSibling);
            let btn = document.createElement("button");
            btn.textContent = "press";
            el.parentNode.insertBefore(btn, el.nextSibling);

            btn.addEventListener("click", () => {
              el.textContent = inp.value;
              el.style.display = "";
              el.parentNode.removeChild(inp);
              el.parentNode.removeChild(btn);
            });
          });
        });
      })();

      //53 Реализуйте раскрывающийся список. По умолчанию есть список стран (ul), по нажатию на страну внутри li со страной появляется список городов
      (function () {
        const countries = document.querySelectorAll(".coutry");

        function show() {
          this.nextElementSibling.classList.add("visible");
          this.removeEventListener("click", show);
          this.addEventListener("click", hide);
        }

        function hide() {
          this.nextElementSibling.classList.remove("visible");
          this.removeEventListener("click", hide);
          this.addEventListener("click", show);
        }

        for (coutry of countries) {
          coutry.addEventListener("click", show);
        }
      })();
    </script>
  </body>
</html>
